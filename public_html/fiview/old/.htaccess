RewriteEngine On
RewriteBase /
Options +Indexes

# Use short URLs, remove PHP
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ /$1.php [L,QSA]

DirectoryIndex index.php index.html

RewriteRule ^favicon.ico https://wildusa.wildfiremap.org/assets/images/favicon2.ico [L]

# GENERAL URLS
RewriteRule ^src/assets/resources/([^/]*)/([^/]*)$ /assets/resources.php?folder=$1&file=$2 [L,QSA]
RewriteRule ^agency/([^/]*)/dispatch$ /dispatch.php?agency=$1 [L,QSA]
RewriteRule ^agency/([^/]*)/dispatch/([^/]*)$ /dispatch.php?agency=$1&page=$2 [L,QSA]

# ADMIN URLS
RewriteRule ^agency/([^/]*)/admin$ /admin.php?agency=$1 [L,QSA]
RewriteRule ^agency/([^/]*)/admin/([^/]*)$ /admin/index.php?agency=$1&page=$2 [L,QSA]
RewriteRule ^agency/([^/]*)/admin/([^/]*)/([^/]*)$ /admin/index.php?agency=$1&page=$2&mode=$3 [L,QSA]
RewriteRule ^agency/([^/]*)/admin/([^/]*)/([^/]*)/([^/]*)$ /admin/index.php?agency=$1&page=$2&mode=$3&function=$4 [L,QSA]

# AJAX URLS
RewriteRule ^ajax/forms/([^/]*)/([^/]*)$ /forms/index.php?form=$1&mode=$2 [L,QSA]
RewriteRule ^ajax/forms/([^/]*)$ /forms/index.php?form=$1 [L,QSA]
RewriteRule ^ajax/api/forms/([^/]*)$ /api/forms.php?function=$1 [L,QSA]
RewriteRule ^ajax/api/forms/([^/]*)/([^/]*)$ /api/forms.php?function=$1&mode=$2 [L,QSA]
RewriteRule ^ajax/api/forms/([^/]*)/([^/]*)/([^/]*)$ /api/forms.php?function=$1&mode=$2&id=$3 [L,QSA]
RewriteRule ^ajax/api/([^/]*)/([^/]*)$ /api/index.php?function=$1&mode=$2 [L,QSA]
RewriteRule ^ajax/api/([^/]*)/([^/]*)/([^/]*)$ /api/index.php?function=$1&mode=$2&method=$3 [L,QSA]

# MAPPING URLS
RewriteRule ^agency/([^/]*)/map/([^/]*)$ /map/index.php?agency=$1&mode=$2 [L,QSA]

# DISABLE CACHING
<IfModule mod_headers.c>
 	Header set Cache-Control "no-cache, no-store, must-revalidate"
	Header set Pragma "no-cache"
	Header set Expires 0
</IfModule>

# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php74” package as the default “PHP” programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php74 .php .php7 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit
