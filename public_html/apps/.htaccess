RewriteEngine On
RewriteBase /
Options -Indexes
Options +FollowSymlinks

DirectoryIndex index.php index.html

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ /$1.php [L,QSA]

ErrorDocument 500 /error.php?error=500
ErrorDocument 404 /error.php?error=404
ErrorDocument 403 /error.php?error=403
ErrorDocument 401 /error.php?error=401
RewriteRule ^error/([^/]*)$ /error.php?error_code=$1 [L,QSA]

RewriteRule ^favicon.ico https://www.mapotechnology.com/assets/images/favicon.ico [L]

# Redirect to HTTPS unless a subdomain
RewriteCond %{HTTPS} off
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteRule ^src/([^/]*)/([^/]*)/([^/]*)/([^/]*)$ /minify.php?app=$1&type=$2&version=$3&file=$4 [NC,L,QSA]
RewriteRule ^src/([^/]*)/([^/]*)/([^/]*)$ /minify.php?app=$1&type=$2&file=$3 [NC,L,QSA]

RewriteCond %{REQUEST_URI} !^/src/ [NC]
RewriteCond %{REQUEST_URI} !^/assets/ [NC]
RewriteCond %{REQUEST_URI} !^/images/ [NC]
RewriteCond %{REQUEST_URI} !^/oreroads/ [NC]
RewriteCond %{REQUEST_URI} !^/favicon.ico [NC]

RewriteRule ^\/?([\w]+)(?:\/(.*))?$ /index.php?route=$1&params=$2 [NC,L,QSA]

# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php84” package as the default “PHP” programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php84___lsphp .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit
